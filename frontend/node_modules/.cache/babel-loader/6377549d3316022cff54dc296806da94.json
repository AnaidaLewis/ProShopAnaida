{"ast":null,"code":"import{useEffect,useState}from\"react\";import React from'react';import{useLocation,useNavigate}from'react-router-dom';import{Table,Button}from'react-bootstrap';import{useDispatch,useSelector}from\"react-redux\";import Loader from\"../components/Loader\";import Message from\"../components/Message\";import FormContainer from\"../components/FormContainer\";import{Link,LinkContainer}from'react-router-bootstrap';import{listUsers,deleteUser}from'../actions/userActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserListScreen(){var dispatch=useDispatch();var userList=useSelector(function(state){return state.userList;});var loading=userList.loading,error=userList.error,users=userList.users;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userDelete=useSelector(function(state){return state.userDelete;});var successDelete=userDelete.success;var navigate=useNavigate();useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(listUsers());}else{navigate('/login');}},[dispatch,successDelete,userInfo]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure you want to delete this user?')){dispatch(deleteUser(id));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Users\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error]}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EMAIL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ADMIN\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/user/\".concat(user.id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(user.id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},user.id);})})]})]});}export default UserListScreen;","map":{"version":3,"names":["useEffect","useState","React","useLocation","useNavigate","Table","Button","useDispatch","useSelector","Loader","Message","FormContainer","Link","LinkContainer","listUsers","deleteUser","UserListScreen","dispatch","userList","state","loading","error","users","userLogin","userInfo","userDelete","successDelete","success","navigate","isAdmin","deleteHandler","id","window","confirm","map","user","name","email","color"],"sources":["/Users/mac/Desktop/react_portfolio/react-portfolio-website-1/backend/frontend/src/screens/UserListScreen.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport React from 'react'\nimport {useLocation, useNavigate} from 'react-router-dom'\nimport {Table, Button } from 'react-bootstrap'\nimport { useDispatch, useSelector } from \"react-redux\"\nimport Loader from \"../components/Loader\";\nimport Message from \"../components/Message\";\nimport FormContainer from \"../components/FormContainer\";\nimport {Link, LinkContainer } from 'react-router-bootstrap'\nimport {listUsers, deleteUser} from '../actions/userActions'\n\n\nfunction UserListScreen() {\n\n    const dispatch = useDispatch()\n\n    const userList = useSelector( state => state.userList)\n    const {loading, error, users} = userList\n\n    const userLogin = useSelector(state => state.userLogin)\n    const {userInfo} = userLogin\n\n    const userDelete = useSelector(state => state.userDelete)\n    const {success : successDelete} = userDelete\n\n    let navigate = useNavigate();\n\n    useEffect(() => {\n        if(userInfo && userInfo.isAdmin)\n        {\n            dispatch(listUsers())\n        }else{\n            navigate('/login')\n        }\n    }, [dispatch,successDelete,userInfo])\n  \n  const deleteHandler = (id) => {\n    if (window.confirm('Are you sure you want to delete this user?')) {\n        dispatch(deleteUser(id))\n    }\n  }\n    return (\n    <div>\n        <h1>Users</h1>\n        {loading\n        ? (<Loader />)\n        : error\n            ? (<Message variant = 'danger'> {error}</Message>)\n            : (\n                <Table striped bordered hover responsive className=\"table-sm\">\n                    <thead>\n                        <tr>\n                            <th>ID</th>\n                            <th>NAME</th>\n                            <th>EMAIL</th>\n                            <th>ADMIN</th>\n                            <th></th>\n                        </tr>\n                    </thead>\n\n                    <tbody>\n                        {users.map(user => (\n                            <tr key = {user.id}>\n                                <td>{user.id}</td>\n                                <td>{user.name}</td>\n                                <td>{user.email}</td>\n                                <td>{user.isAdmin ? (\n                                    <i className= \"fas fa-check\" style = {{color : 'green'}}></i>\n                                ) : (\n                                    <i className=\"fas fa-times\" style = {{color : 'red'}}></i>\n                                )}</td>\n\n                                <td>\n                                    <LinkContainer to = {`/admin/user/${user.id}/edit`}>\n                                        <Button variant = 'light' className = 'btn-sm'> \n                                        <i className=\"fas fa-edit\"></i>\n                                        </Button>\n                                    </LinkContainer>\n\n                                    <Button variant = 'danger' className = 'btn-sm' onClick = {() => deleteHandler(user.id)}> \n                                        <i className=\"fas fa-trash\"></i>\n                                    </Button>\n                                </td>\n                            </tr>\n                        ))}\n                    </tbody>\n\n                </Table>\n            )\n        }\n    </div>\n  )\n}\n\nexport default UserListScreen"],"mappings":"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"},"metadata":{},"sourceType":"module"}