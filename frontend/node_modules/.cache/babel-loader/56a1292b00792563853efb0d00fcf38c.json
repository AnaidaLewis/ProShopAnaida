{"ast":null,"code":"import _toConsumableArray from\"/Users/mac/Desktop/react_portfolio/react-portfolio-website-1/backend/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import{Link,useParams,useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,removeFromCart}from'../actions/cartActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CartScreen(){var _useParams=useParams(),id=_useParams.id;var params=new URLSearchParams(window.location.search);var qty=Number(params.get(\"qty\"));console.log('hi',qty);var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;console.log(cartItems);useEffect(function(){if(id){dispatch(addToCart(id,qty));}},[dispatch,id,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var navigate=useNavigate();var checkoutHandler=function checkoutHandler(){var pathname='/login?redirect=/shipping';navigate(pathname);};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[\"Your Cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/prod/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"SubTotal (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"]}),\"$\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block col-12\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})]});}export default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","useParams","useNavigate","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","Message","addToCart","removeFromCart","CartScreen","id","params","URLSearchParams","window","location","search","qty","Number","get","console","log","dispatch","cart","state","cartItems","removeFromCartHandler","navigate","checkoutHandler","pathname","length","map","item","image","name","product","price","e","target","value","Array","countInStock","keys","x","reduce","acc","toFixed"],"sources":["/Users/mac/Desktop/react_portfolio/react-portfolio-website-1/backend/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React,{useEffect} from 'react'\nimport { Link, useParams, useNavigate } from 'react-router-dom'\nimport {useDispatch, useSelector} from 'react-redux'\nimport {Row, Col, ListGroup, Image, Form, Button, Card} from 'react-bootstrap'\nimport Message from '../components/Message'\nimport {addToCart, removeFromCart} from '../actions/cartActions'\n\nfunction CartScreen() {\n\n  const {id} = useParams()\n  const params = new URLSearchParams(window.location.search);\n  const qty = Number(params.get(\"qty\"))\n\n  console.log('hi', qty)\n  const dispatch = useDispatch()\n\n\n\n  const cart = useSelector(state => state.cart)\n  const {cartItems} = cart\n  console.log(cartItems)\n\n  useEffect(() => {\n    if(id){\n      dispatch(addToCart(id,qty))\n    }\n  }, [dispatch, id, qty])\n\n  const removeFromCartHandler = (id) => {\n      dispatch(removeFromCart(id))\n  }\n\n\n  let navigate = useNavigate();\n\n  const checkoutHandler = () => {\n    let pathname = '/login?redirect=/shipping'\n    navigate(pathname)\n  }\n\n\n  return (\n    <Row>\n      <Col md = {8}>\n        <h1>Shopping Cart</h1>\n        {cartItems.length === 0 ? (\n          <Message variant = 'info'>\n            Your Cart is empty <Link to = '/'>Go Back</Link>\n          </Message>\n\n        ) : (\n          <ListGroup variant = 'flush'>\n            {cartItems.map(item => (\n              <ListGroup.Item key = {item.product}>\n                <Row>\n                  <Col md = {2}>\n                    <Image src = {item.image} alt = {item.name} fluid rounded/>\n                  </Col>\n                  <Col md = {3}>\n                    <Link to = {`/prod/${item.product}`}>{item.name}</Link>\n                  </Col>\n\n                  <Col md = {2}>\n                    ${item.price}\n                  </Col>\n                  <Col md = {3}>\n                  <Form.Control\n                      as=\"select\"\n                      value={item.qty}\n                      onChange={(e) => dispatch(addToCart(item.product, Number(e.target.value)))}\n                  >\n                    {\n\n                        [...Array(item.countInStock).keys()].map((x) => (\n                            <option key={x + 1} value={x + 1}>\n                                {x + 1}\n                            </option>\n                        ))\n                    }\n\n                  </Form.Control>\n                                            \n                  </Col>\n\n                  <Col md = {1}>\n                    <Button\n                      type = 'button'\n                      variant = 'light'\n                      onClick = {() => removeFromCartHandler(item.product)}\n                    >\n                      <i className = 'fas fa-trash'></i>\n                    </Button>\n                  </Col>\n                </Row>\n              </ListGroup.Item>\n            ))}\n          </ListGroup>\n        )}\n      </Col>\n      <Col md = {4}>\n        <ListGroup variant = 'flush'>\n          <ListGroup.Item>\n            <h2>SubTotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)}) items</h2>\n            ${cartItems.reduce((acc, item) => acc + item.qty * item.price , 0).toFixed(2)}\n          \n          </ListGroup.Item>\n          \n          <ListGroup.Item>\n            <Button\n            type = 'button'\n            className = 'btn-block col-12'\n            disabled = {cartItems.length === 0}\n            onClick = {checkoutHandler}\n            >\n              Proceed To Checkout\n            </Button>\n          </ListGroup.Item>\n        </ListGroup>\n      </Col>\n    </Row>\n  )\n}\n\nexport default CartScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module"}